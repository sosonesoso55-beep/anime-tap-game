<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Anime Tap</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:sans-serif}
body{
background:radial-gradient(circle,#1a1a3d,#000);
color:#fff;
height:100vh;
overflow:hidden;
}

#app{
display:flex;
flex-direction:column;
height:100%;
padding:10px;
gap:8px;
}

.panel{
background:rgba(255,255,255,.08);
border-radius:18px;
padding:10px;
}

#profile{
display:flex;
align-items:center;
gap:12px;
}

#profile img{
width:70px;
height:70px;
border-radius:50%;
border:2px solid #ff69b4;
}

#score{
font-size:24px;
font-weight:bold;
}

#tap-zone{
flex:1;
display:flex;
align-items:center;
justify-content:center;
}

#tap{
width:280px;
height:280px;
border-radius:50%;
border:none;
background:url("girl.png") center/cover;
box-shadow:0 0 50px #ff69b4;
animation:pulse 2s infinite;
}

@keyframes pulse{
0%{transform:scale(1)}
50%{transform:scale(1.06)}
100%{transform:scale(1)}
}

#menu{
display:flex;
justify-content:space-around;
}

button{
background:linear-gradient(135deg,#ff69b4,#ff1493);
border:none;
border-radius:14px;
color:#fff;
padding:10px 16px;
font-size:14px;
}

.modal{
position:fixed;
inset:0;
background:rgba(0,0,0,.7);
display:none;
align-items:center;
justify-content:center;
z-index:10;
}

.modal-content{
background:#1a1a3d;
padding:20px;
border-radius:18px;
width:90%;
max-width:340px;
text-align:center;
}
</style>
</head>

<body>
<div id="app">

<div class="panel" id="profile">
<img src="girl.png">
<div>
<div>ID: <span id="uid"></span></div>
<div id="score">0 ‚≠ê</div>
<div id="boost">x1</div>
</div>
</div>

<div id="tap-zone">
<button id="tap"></button>
</div>

<div class="panel" id="menu">
<button onclick="openModal('shop')">üõí</button>
<button onclick="openModal('leaderboard')">üèÜ</button>
<button onclick="openModal('settings')">‚öôÔ∏è</button>
</div>

</div>

<!-- –ú–ê–ì–ê–ó–ò–ù -->
<div class="modal" id="shop">
<div class="modal-content">
<h3>–ú–∞–≥–∞–∑–∏–Ω</h3><br>
<button onclick="buyBoost(2,500)">x2 ‚Äî 10 –º–∏–Ω (500‚≠ê)</button><br><br>
<button onclick="buyBoost(5,3000)">x5 ‚Äî 10 –º–∏–Ω (3000‚≠ê)</button><br><br>
<button onclick="closeModals()">–ó–∞–∫—Ä—ã—Ç—å</button>
</div>
</div>

<!-- –õ–ò–î–ï–†–ë–û–†–î -->
<div class="modal" id="leaderboard">
<div class="modal-content">
<h3>–õ–∏–¥–µ—Ä–±–æ—Ä–¥</h3>
<div id="lb"></div><br>
<button onclick="closeModals()">–ó–∞–∫—Ä—ã—Ç—å</button>
</div>
</div>

<!-- –ù–ê–°–¢–†–û–ô–ö–ò -->
<div class="modal" id="settings">
<div class="modal-content">
<h3>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h3><br>
<button onclick="toggleMusic()">–ú—É–∑—ã–∫–∞</button><br><br>
<button onclick="resetGame()">–°–±—Ä–æ—Å</button><br><br>
<button onclick="closeModals()">–ó–∞–∫—Ä—ã—Ç—å</button>
</div>
</div>

<audio id="tapSound" src="tap.mp3"></audio>
<audio id="music" src="music.mp3" loop></audio>

<script>
// ===== –°–û–•–†–ê–ù–ï–ù–ò–ï =====
const save = (k,v)=>localStorage.setItem(k,JSON.stringify(v));
const load = (k,d)=>JSON.parse(localStorage.getItem(k)) ?? d;

// ===== –î–ê–ù–ù–´–ï =====
const uid = load("uid",Math.random().toString(36).slice(2));
save("uid",uid);

let score = load("score",0);
let power = load("power",1);
let boostEnd = load("boostEnd",0);
let musicOn = load("musicOn",true);

document.getElementById("uid").innerText = uid;

const tapSound = document.getElementById("tapSound");
const music = document.getElementById("music");
music.volume = 0.3;

// ===== –õ–û–ì–ò–ö–ê =====
function tap(){
if(musicOn && music.paused) music.play();
tapSound.currentTime=0;
tapSound.play();

checkBoost();
score += power;
save("score",score);
render();
}

function buyBoost(mult,price){
if(score<price) return alert("–ú–∞–ª–æ –æ—á–∫–æ–≤");
score-=price;
power=mult;
boostEnd=Date.now()+600000;
save("score",score);
save("power",power);
save("boostEnd",boostEnd);
render();
closeModals();
}

function checkBoost(){
if(power>1 && Date.now()>boostEnd){
power=1;
save("power",1);
}
}

function toggleMusic(){
musicOn=!musicOn;
save("musicOn",musicOn);
musicOn?music.play():music.pause();
}

function render(){
document.getElementById("score").innerText = score+" ‚≠ê";
document.getElementById("boost").innerText = "x"+power;
renderLB();
}

function renderLB(){
let lb = load("lb",{});
lb[uid]=score;
save("lb",lb);

document.getElementById("lb").innerHTML =
Object.entries(lb)
.sort((a,b)=>b[1]-a[1])
.slice(0,5)
.map((u,i)=>`${i+1}. ${u[0]} ‚Äî ${u[1]}‚≠ê`)
.join("<br>");
}

function resetGame(){
if(!confirm("–°–±—Ä–æ—Å–∏—Ç—å –≤—Å—ë?"))return;
localStorage.clear();
location.reload();
}

// ===== UI =====
function openModal(id){document.getElementById(id).style.display="flex";}
function closeModals(){document.querySelectorAll(".modal").forEach(m=>m.style.display="none");}

document.getElementById("tap").onclick=tap;
render();
</script>
</body>
                    </html>
